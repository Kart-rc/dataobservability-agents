# PR/MR Description Template

This template is used to generate Pull Request (GitHub) and Merge Request (GitLab) descriptions for observability instrumentation PRs.

## Template Structure

```markdown
## Autopilot: Observability Instrumentation

This PR was generated by the Instrumentation Autopilot to add observability
instrumentation to this repository based on Scout Agent analysis.

### Summary
- **Archetypes Detected**: ${ARCHETYPES}
- **Confidence Score**: ${CONFIDENCE}
- **Diff Plan ID**: ${DIFF_PLAN_ID}

### Changes
${CHANGES_LIST}

### Gaps Addressed
${GAPS_LIST}

### Files Modified
| File | Action | Template |
|------|--------|----------|
${FILES_LIST}

### Verification Checklist
- [ ] Code review approved by domain expert
- [ ] Unit tests passing
- [ ] Lineage spec reviewed for accuracy
- [ ] Contract SLOs appropriate for data tier
- [ ] RUNBOOK.md reviewed for operational accuracy

### Next Steps
After merge, the **Telemetry Validator** will automatically verify signals in staging.
Gate 1 checks will run as part of this PR's CI pipeline.

### Need Help?
- [Observability Runbook](./RUNBOOK.md)
- [Instrumentation Autopilot Docs](https://docs.internal/autopilot)
- Contact: #observability-support

---
*Generated by Instrumentation Autopilot v1.0*
*Scout Agent Scan: ${SCAN_TIMESTAMP}*
*PR Author: ${PR_TIMESTAMP}*
```

## Variable Definitions

| Variable | Description | Source |
|----------|-------------|--------|
| `${ARCHETYPES}` | Comma-separated list of detected archetypes | Diff Plan |
| `${CONFIDENCE}` | Confidence score as percentage | Diff Plan |
| `${DIFF_PLAN_ID}` | Unique identifier for the Diff Plan | Diff Plan |
| `${CHANGES_LIST}` | Markdown list of file changes | Generated |
| `${GAPS_LIST}` | Markdown list of gaps addressed | Diff Plan |
| `${FILES_LIST}` | Table rows of modified files | Generated |
| `${SCAN_TIMESTAMP}` | When Scout Agent ran | Diff Plan |
| `${PR_TIMESTAMP}` | When PR was created | Generated |

## Example Output

```markdown
## Autopilot: Observability Instrumentation

This PR was generated by the Instrumentation Autopilot to add observability
instrumentation to this repository based on Scout Agent analysis.

### Summary
- **Archetypes Detected**: kafka-microservice, spring-boot
- **Confidence Score**: 87%
- **Diff Plan ID**: dp-abc123

### Changes
- `src/main/java/com/company/otel/OtelKafkaConsumerInterceptor.java` (create)
- `src/main/resources/application-otel.yaml` (create)
- `lineage/orders-enricher.yaml` (create)
- `contracts/orders-enricher.yaml` (create)
- `RUNBOOK.md` (create)
- `pom.xml` (modify)

### Gaps Addressed
- [P0] missing_otel: Kafka consumer lacks OTel interceptor
- [P0] missing_correlation: Producer not injecting x-obs-* headers
- [P1] missing_lineage_spec: No lineage spec file defining input/output mappings
- [P1] missing_contract: No data contract definition
- [P2] missing_runbook: No operational runbook

### Files Modified
| File | Action | Template |
|------|--------|----------|
| `src/main/java/com/company/otel/OtelKafkaConsumerInterceptor.java` | create | kafka-consumer-otel-java |
| `src/main/resources/application-otel.yaml` | create | spring-boot-otel |
| `lineage/orders-enricher.yaml` | create | lineage-spec |
| `contracts/orders-enricher.yaml` | create | contract-stub |
| `RUNBOOK.md` | create | runbook |
| `pom.xml` | modify | patch |

### Verification Checklist
- [ ] Code review approved by domain expert
- [ ] Unit tests passing
- [ ] Lineage spec reviewed for accuracy
- [ ] Contract SLOs appropriate for data tier
- [ ] RUNBOOK.md reviewed for operational accuracy

### Next Steps
After merge, the **Telemetry Validator** will automatically verify signals in staging.
Gate 1 checks will run as part of this PR's CI pipeline.

### Need Help?
- [Observability Runbook](./RUNBOOK.md)
- [Instrumentation Autopilot Docs](https://docs.internal/autopilot)
- Contact: #observability-support

---
*Generated by Instrumentation Autopilot v1.0*
*Scout Agent Scan: 2026-01-04T10:30:00Z*
*PR Author: 2026-01-04T10:31:00Z*
```

## Customization

### Adding Custom Sections

To add organization-specific sections:

1. Edit the PR template in `references/pr-template.md`
2. Add new variables to `scripts/generate_pr.py`
3. Update documentation

### Localization

For non-English teams, create localized templates:
- `pr-template.de.md` (German)
- `pr-template.ja.md` (Japanese)

Configure with:
```yaml
pr_author:
  locale: "de"
```
